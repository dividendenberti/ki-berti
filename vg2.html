<!doctype html>
<html lang="de" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Versicherungsvergleich</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <style>
    body {
      box-sizing: border-box;
    }
    
    .upload-zone {
      border: 2px dashed;
      transition: all 0.3s ease;
    }
    
    .upload-zone:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }
    
    .upload-zone.drag-over {
      border-style: solid;
      transform: scale(1.02);
    }
    
    .pdf-item {
      animation: slideIn 0.3s ease;
    }
    
    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateX(-10px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }
    
    .loading-spinner {
      border: 3px solid rgba(0, 0, 0, 0.1);
      border-radius: 50%;
      border-top-color: currentColor;
      width: 24px;
      height: 24px;
      animation: spin 0.8s linear infinite;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full">
  <div id="app" class="w-full h-full overflow-auto"></div>
  <script>
    const defaultConfig = {
      background_color: '#f7fafc',
      card_color: '#ffffff',
      text_color: '#2d3748',
      primary_button_color: '#4299e1',
      secondary_button_color: '#48bb78',
      main_title: 'Versicherungsvergleich',
      left_title: 'Versicherung A',
      right_title: 'Versicherung B',
      submit_button_text: 'Vergleich starten',
      font_family: 'Inter',
      font_size: 16
    };

    let leftFiles = [];
    let rightFiles = [];
    let isSubmitting = false;

    function onConfigChange(config) {
      const app = document.getElementById('app');
      const bgColor = config.background_color || defaultConfig.background_color;
      const cardColor = config.card_color || defaultConfig.card_color;
      const textColor = config.text_color || defaultConfig.text_color;
      const primaryColor = config.primary_button_color || defaultConfig.primary_button_color;
      const secondaryColor = config.secondary_button_color || defaultConfig.secondary_button_color;
      const mainTitle = config.main_title || defaultConfig.main_title;
      const leftTitle = config.left_title || defaultConfig.left_title;
      const rightTitle = config.right_title || defaultConfig.right_title;
      const submitText = config.submit_button_text || defaultConfig.submit_button_text;
      const customFont = config.font_family || defaultConfig.font_family;
      const baseSize = config.font_size || defaultConfig.font_size;
      const baseFontStack = '-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif';

      document.body.style.backgroundColor = bgColor;
      document.body.style.color = textColor;
      document.body.style.fontFamily = `${customFont}, ${baseFontStack}`;

      const titleElement = document.getElementById('main-title');
      if (titleElement) {
        titleElement.textContent = mainTitle;
        titleElement.style.color = textColor;
        titleElement.style.fontSize = `${baseSize * 2}px`;
        titleElement.style.fontFamily = `${customFont}, ${baseFontStack}`;
      }

      const leftTitleElement = document.getElementById('left-section-title');
      if (leftTitleElement) {
        leftTitleElement.textContent = leftTitle;
        leftTitleElement.style.color = textColor;
        leftTitleElement.style.fontSize = `${baseSize * 1.5}px`;
        leftTitleElement.style.fontFamily = `${customFont}, ${baseFontStack}`;
      }

      const rightTitleElement = document.getElementById('right-section-title');
      if (rightTitleElement) {
        rightTitleElement.textContent = rightTitle;
        rightTitleElement.style.color = textColor;
        rightTitleElement.style.fontSize = `${baseSize * 1.5}px`;
        rightTitleElement.style.fontFamily = `${customFont}, ${baseFontStack}`;
      }

      const submitButton = document.getElementById('submit-button');
      if (submitButton) {
        const submitText = config.submit_button_text || defaultConfig.submit_button_text;
        submitButton.textContent = submitText;
        submitButton.style.backgroundColor = primaryColor;
        submitButton.style.fontSize = `${baseSize * 1.125}px`;
        submitButton.style.fontFamily = `${customFont}, ${baseFontStack}`;
      }

      const uploadZones = document.querySelectorAll('.upload-zone');
      uploadZones.forEach(zone => {
        zone.style.backgroundColor = cardColor;
        zone.style.borderColor = primaryColor;
      });

      const uploadLabels = document.querySelectorAll('.upload-label');
      uploadLabels.forEach(label => {
        label.style.color = textColor;
        label.style.fontSize = `${baseSize}px`;
        label.style.fontFamily = `${customFont}, ${baseFontStack}`;
      });

      const uploadIcons = document.querySelectorAll('.upload-icon');
      uploadIcons.forEach(icon => {
        icon.style.color = primaryColor;
      });

      const pdfItems = document.querySelectorAll('.pdf-item');
      pdfItems.forEach(item => {
        item.style.backgroundColor = cardColor;
        item.style.fontSize = `${baseSize * 0.875}px`;
        item.style.fontFamily = `${customFont}, ${baseFontStack}`;
      });

      const pdfNames = document.querySelectorAll('.pdf-name');
      pdfNames.forEach(name => {
        name.style.color = textColor;
      });

      const removeButtons = document.querySelectorAll('.remove-button');
      removeButtons.forEach(button => {
        button.style.backgroundColor = secondaryColor;
        button.style.fontSize = `${baseSize * 0.875}px`;
        button.style.fontFamily = `${customFont}, ${baseFontStack}`;
      });

      const remarkLabel = document.querySelector('label[for="remark-input"]');
      if (remarkLabel) {
        remarkLabel.style.color = textColor;
        remarkLabel.style.fontSize = `${baseSize}px`;
        remarkLabel.style.fontFamily = `${customFont}, ${baseFontStack}`;
      }

      const remarkInput = document.getElementById('remark-input');
      if (remarkInput) {
        remarkInput.style.backgroundColor = cardColor;
        remarkInput.style.color = textColor;
        remarkInput.style.borderColor = primaryColor;
        remarkInput.style.fontSize = `${baseSize * 0.875}px`;
        remarkInput.style.fontFamily = `${customFont}, ${baseFontStack}`;
      }
    }

    function renderApp() {
      const config = window.elementSdk?.config || defaultConfig;
      const bgColor = config.background_color || defaultConfig.background_color;
      const cardColor = config.card_color || defaultConfig.card_color;
      const textColor = config.text_color || defaultConfig.text_color;
      const primaryColor = config.primary_button_color || defaultConfig.primary_button_color;
      const secondaryColor = config.secondary_button_color || defaultConfig.secondary_button_color;
      const mainTitle = config.main_title || defaultConfig.main_title;
      const leftTitle = config.left_title || defaultConfig.left_title;
      const rightTitle = config.right_title || defaultConfig.right_title;
      const submitText = config.submit_button_text || defaultConfig.submit_button_text;
      const customFont = config.font_family || defaultConfig.font_family;
      const baseSize = config.font_size || defaultConfig.font_size;
      const baseFontStack = '-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif';

      document.body.style.backgroundColor = bgColor;
      document.body.style.fontFamily = `${customFont}, ${baseFontStack}`;

      const app = document.getElementById('app');
      app.innerHTML = `
        <div class="w-full min-h-full p-8">
          <div class="max-w-7xl mx-auto">
            <div class="flex justify-between items-center mb-12">
              <div class="flex-1"></div>
              <h1 id="main-title" class="flex-1 text-center font-bold" style="color: ${textColor}; font-size: ${baseSize * 2}px; font-family: ${customFont}, ${baseFontStack};">
                ${mainTitle}
              </h1>
              <div class="flex-1 flex justify-end">
                <a href="index.html" class="text-white px-6 py-3 rounded-lg shadow-lg transition-all hover:shadow-xl flex items-center gap-2" style="background-color: ${primaryColor}; font-size: ${baseSize}px; font-family: ${customFont}, ${baseFontStack};">
                  <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
                  </svg>
                  Home
                </a>
              </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
              <!-- Linker Upload-Bereich -->
              <div>
                <h2 id="left-section-title" class="font-semibold mb-4" style="color: ${textColor}; font-size: ${baseSize * 1.5}px; font-family: ${customFont}, ${baseFontStack};">
                  ${leftTitle}
                </h2>
                <div id="left-upload-zone" class="upload-zone rounded-lg p-8 text-center cursor-pointer" style="background-color: ${cardColor}; border-color: ${primaryColor};">
                  <svg class="upload-icon mx-auto mb-4" style="color: ${primaryColor};" width="64" height="64" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
                  </svg>
                  <p class="upload-label font-medium mb-2" style="color: ${textColor}; font-size: ${baseSize}px; font-family: ${customFont}, ${baseFontStack};">
                    PDFs hierher ziehen oder klicken
                  </p>
                  <p class="upload-label" style="color: ${textColor}; opacity: 0.6; font-size: ${baseSize * 0.875}px; font-family: ${customFont}, ${baseFontStack};">
                    Mehrere Dateien möglich
                  </p>
                  <input type="file" id="left-file-input" accept="application/pdf" multiple class="hidden" />
                </div>
                <div id="left-files-list" class="mt-4 space-y-2"></div>
              </div>

              <!-- Rechter Upload-Bereich -->
              <div>
                <h2 id="right-section-title" class="font-semibold mb-4" style="color: ${textColor}; font-size: ${baseSize * 1.5}px; font-family: ${customFont}, ${baseFontStack};">
                  ${rightTitle}
                </h2>
                <div id="right-upload-zone" class="upload-zone rounded-lg p-8 text-center cursor-pointer" style="background-color: ${cardColor}; border-color: ${primaryColor};">
                  <svg class="upload-icon mx-auto mb-4" style="color: ${primaryColor};" width="64" height="64" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
                  </svg>
                  <p class="upload-label font-medium mb-2" style="color: ${textColor}; font-size: ${baseSize}px; font-family: ${customFont}, ${baseFontStack};">
                    PDFs hierher ziehen oder klicken
                  </p>
                  <p class="upload-label" style="color: ${textColor}; opacity: 0.6; font-size: ${baseSize * 0.875}px; font-family: ${customFont}, ${baseFontStack};">
                    Mehrere Dateien möglich
                  </p>
                  <input type="file" id="right-file-input" accept="application/pdf" multiple class="hidden" />
                </div>
                <div id="right-files-list" class="mt-4 space-y-2"></div>
              </div>
            </div>

            <!-- Bemerkungsfeld und Submit Button -->
            <div class="text-center max-w-2xl mx-auto">
              <div class="mb-6">
                <label for="remark-input" class="block text-left font-medium mb-2" style="color: ${textColor}; font-size: ${baseSize}px; font-family: ${customFont}, ${baseFontStack};">
                  Bemerkung (optional)
                </label>
                <textarea 
                  id="remark-input" 
                  rows="3" 
                  placeholder="Hier können Sie optionale Bemerkungen zum Vergleich eingeben..."
                  class="w-full p-4 rounded-lg border-2 resize-none focus:outline-none focus:ring-2 transition-all"
                  style="background-color: ${cardColor}; color: ${textColor}; border-color: ${primaryColor}; font-size: ${baseSize * 0.875}px; font-family: ${customFont}, ${baseFontStack};"
                ></textarea>
              </div>
              
              <button id="submit-button" class="text-white font-semibold px-12 py-4 rounded-lg shadow-lg transition-all hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed" style="background-color: ${primaryColor}; font-size: ${baseSize * 1.125}px; font-family: ${customFont}, ${baseFontStack};">
                ${submitText}
              </button>
              <div id="status-message" class="mt-4" style="font-size: ${baseSize * 0.875}px; font-family: ${customFont}, ${baseFontStack}; min-height: 20px;"></div>
            </div>
          </div>
        </div>
      `;

      setupEventListeners();
      renderFilesList('left');
      renderFilesList('right');
    }

    function setupEventListeners() {
      setupUploadZone('left');
      setupUploadZone('right');
      
      const submitButton = document.getElementById('submit-button');
      submitButton.addEventListener('click', handleSubmit);
    }

    function setupUploadZone(side) {
      const zone = document.getElementById(`${side}-upload-zone`);
      const input = document.getElementById(`${side}-file-input`);

      zone.addEventListener('click', () => input.click());

      zone.addEventListener('dragover', (e) => {
        e.preventDefault();
        zone.classList.add('drag-over');
      });

      zone.addEventListener('dragleave', () => {
        zone.classList.remove('drag-over');
      });

      zone.addEventListener('drop', (e) => {
        e.preventDefault();
        zone.classList.remove('drag-over');
        const files = Array.from(e.dataTransfer.files).filter(f => f.type === 'application/pdf');
        addFiles(side, files);
      });

      input.addEventListener('change', (e) => {
        const files = Array.from(e.target.files);
        addFiles(side, files);
        input.value = '';
      });
    }

    function addFiles(side, files) {
      const fileArray = side === 'left' ? leftFiles : rightFiles;
      files.forEach(file => {
        if (!fileArray.find(f => f.name === file.name)) {
          fileArray.push(file);
        }
      });
      renderFilesList(side);
    }

    function removeFile(side, fileName) {
      if (side === 'left') {
        leftFiles = leftFiles.filter(f => f.name !== fileName);
      } else {
        rightFiles = rightFiles.filter(f => f.name !== fileName);
      }
      renderFilesList(side);
    }

    function renderFilesList(side) {
      const config = window.elementSdk?.config || defaultConfig;
      const cardColor = config.card_color || defaultConfig.card_color;
      const textColor = config.text_color || defaultConfig.text_color;
      const secondaryColor = config.secondary_button_color || defaultConfig.secondary_button_color;
      const customFont = config.font_family || defaultConfig.font_family;
      const baseSize = config.font_size || defaultConfig.font_size;
      const baseFontStack = '-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif';

      const container = document.getElementById(`${side}-files-list`);
      const files = side === 'left' ? leftFiles : rightFiles;

      if (files.length === 0) {
        container.innerHTML = '';
        return;
      }

      container.innerHTML = files.map(file => `
        <div class="pdf-item flex items-center justify-between p-3 rounded-lg shadow-sm" style="background-color: ${cardColor}; font-size: ${baseSize * 0.875}px; font-family: ${customFont}, ${baseFontStack};">
          <div class="flex items-center gap-3 flex-1 min-w-0">
            <svg width="24" height="24" fill="none" stroke="${textColor}" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z" />
            </svg>
            <span class="pdf-name truncate" style="color: ${textColor};">${file.name}</span>
            <span style="color: ${textColor}; opacity: 0.5;">(${formatFileSize(file.size)})</span>
          </div>
          <button class="remove-button text-white px-4 py-2 rounded hover:opacity-90 transition-opacity" style="background-color: ${secondaryColor}; font-size: ${baseSize * 0.875}px; font-family: ${customFont}, ${baseFontStack};" onclick="removeFile('${side}', '${file.name}')">
            Entfernen
          </button>
        </div>
      `).join('');
    }

    function formatFileSize(bytes) {
      if (bytes < 1024) return bytes + ' B';
      if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + ' KB';
      return (bytes / (1024 * 1024)).toFixed(1) + ' MB';
    }

    function displayPDF(base64Data) {
      const config = window.elementSdk?.config || defaultConfig;
      const cardColor = config.card_color || defaultConfig.card_color;
      const textColor = config.text_color || defaultConfig.text_color;
      const secondaryColor = config.secondary_button_color || defaultConfig.secondary_button_color;
      const customFont = config.font_family || defaultConfig.font_family;
      const baseSize = config.font_size || defaultConfig.font_size;
      const baseFontStack = '-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif';

      // Alte PDF entfernen falls vorhanden
      const oldPdfContainer = document.getElementById('pdf-result-container');
      if (oldPdfContainer) {
        oldPdfContainer.remove();
      }

      // Container für PDF erstellen
      const pdfContainer = document.createElement('div');
      pdfContainer.id = 'pdf-result-container';
      pdfContainer.className = 'mt-8 p-6 rounded-lg shadow-lg';
      pdfContainer.style.backgroundColor = cardColor;
      
      pdfContainer.innerHTML = `
        <div class="flex items-center justify-between mb-4">
          <h3 class="font-semibold" style="color: ${textColor}; font-size: ${baseSize * 1.25}px; font-family: ${customFont}, ${baseFontStack};">
            Ergebnis-PDF
          </h3>
          <button id="download-pdf-btn" class="text-white px-4 py-2 rounded hover:opacity-90 transition-opacity" style="background-color: ${secondaryColor}; font-size: ${baseSize * 0.875}px; font-family: ${customFont}, ${baseFontStack};">
            PDF herunterladen
          </button>
        </div>
        <iframe id="pdf-viewer" style="width: 100%; height: 600px; border: 1px solid rgba(0,0,0,0.1); border-radius: 8px;"></iframe>
      `;

      // PDF Container nach dem Status-Bereich einfügen
      const statusMessage = document.getElementById('status-message');
      statusMessage.parentElement.appendChild(pdfContainer);

      // PDF in iframe laden
      const iframe = document.getElementById('pdf-viewer');
      iframe.src = `data:application/pdf;base64,${base64Data}`;

      // Download-Button funktionsfähig machen
      const downloadBtn = document.getElementById('download-pdf-btn');
      downloadBtn.addEventListener('click', () => {
        const link = document.createElement('a');
        link.href = `data:application/pdf;base64,${base64Data}`;
        link.download = `vergleich_${new Date().getTime()}.pdf`;
        link.click();
      });
    }

    async function handleSubmit() {
      if (isSubmitting) return;

      const statusMessage = document.getElementById('status-message');
      const submitButton = document.getElementById('submit-button');
      const config = window.elementSdk?.config || defaultConfig;
      const textColor = config.text_color || defaultConfig.text_color;
      const primaryColor = config.primary_button_color || defaultConfig.primary_button_color;
      const secondaryColor = config.secondary_button_color || defaultConfig.secondary_button_color;

      if (leftFiles.length === 0 || rightFiles.length === 0) {
        statusMessage.innerHTML = `<p style="color: ${secondaryColor};">Bitte laden Sie PDFs auf beiden Seiten hoch.</p>`;
        return;
      }

      isSubmitting = true;
      submitButton.disabled = true;
      submitButton.innerHTML = '<div class="loading-spinner mx-auto"></div>';
      statusMessage.innerHTML = `<p style="color: ${primaryColor};">Dateien werden gesendet...</p>`;

      try {
        const formData = new FormData();
        
        // Linke Dateien mit eindeutigen Feldnamen
        leftFiles.forEach((file, index) => {
          formData.append(`links_${index}`, file, file.name);
        });
        
        // Rechte Dateien mit eindeutigen Feldnamen
        rightFiles.forEach((file, index) => {
          formData.append(`rechts_${index}`, file, file.name);
        });
        
        // Metadaten hinzufügen
        formData.append('links_count', leftFiles.length.toString());
        formData.append('rechts_count', rightFiles.length.toString());
        formData.append('total_count', (leftFiles.length + rightFiles.length).toString());
        
        // Bemerkung hinzufügen (wenn vorhanden)
        const remarkInput = document.getElementById('remark-input');
        const remarkText = remarkInput.value.trim();
        if (remarkText) {
          formData.append('bemerkung', remarkText);
        }

        const response = await fetch('https://n8n-nocodb.auralesen.at/webhook-test/vg2', {
          method: 'POST',
          headers: {
            'Authorization': 'Bearer wert1234'
          },
          body: formData
        });

        if (response.ok) {
          const result = await response.json();
          
          statusMessage.innerHTML = `<p style="color: ${secondaryColor};">✓ Erfolgreich gesendet! Links: ${leftFiles.length} Dateien, Rechts: ${rightFiles.length} Dateien</p>`;
          
          // PDF anzeigen wenn vorhanden
          if (result && result.length > 0 && result[0].data) {
            displayPDF(result[0].data);
          }
          
          leftFiles = [];
          rightFiles = [];
          renderFilesList('left');
          renderFilesList('right');
          
          // Bemerkungsfeld leeren
          const remarkInput = document.getElementById('remark-input');
          if (remarkInput) {
            remarkInput.value = '';
          }
        } else {
          throw new Error(`Server antwortete mit Status ${response.status}`);
        }
      } catch (error) {
        statusMessage.innerHTML = `<p style="color: ${secondaryColor};">Fehler beim Senden: ${error.message}</p>`;
      } finally {
        isSubmitting = false;
        submitButton.disabled = false;
        const submitText = config.submit_button_text || defaultConfig.submit_button_text;
        submitButton.textContent = submitText;
      }
    }

    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities: (config) => ({
          recolorables: [
            {
              get: () => config.background_color || defaultConfig.background_color,
              set: (value) => {
                config.background_color = value;
                window.elementSdk.setConfig({ background_color: value });
              }
            },
            {
              get: () => config.card_color || defaultConfig.card_color,
              set: (value) => {
                config.card_color = value;
                window.elementSdk.setConfig({ card_color: value });
              }
            },
            {
              get: () => config.text_color || defaultConfig.text_color,
              set: (value) => {
                config.text_color = value;
                window.elementSdk.setConfig({ text_color: value });
              }
            },
            {
              get: () => config.primary_button_color || defaultConfig.primary_button_color,
              set: (value) => {
                config.primary_button_color = value;
                window.elementSdk.setConfig({ primary_button_color: value });
              }
            },
            {
              get: () => config.secondary_button_color || defaultConfig.secondary_button_color,
              set: (value) => {
                config.secondary_button_color = value;
                window.elementSdk.setConfig({ secondary_button_color: value });
              }
            }
          ],
          borderables: [],
          fontEditable: {
            get: () => config.font_family || defaultConfig.font_family,
            set: (value) => {
              config.font_family = value;
              window.elementSdk.setConfig({ font_family: value });
            }
          },
          fontSizeable: {
            get: () => config.font_size || defaultConfig.font_size,
            set: (value) => {
              config.font_size = value;
              window.elementSdk.setConfig({ font_size: value });
            }
          }
        }),
        mapToEditPanelValues: (config) => new Map([
          ['main_title', config.main_title || defaultConfig.main_title],
          ['left_title', config.left_title || defaultConfig.left_title],
          ['right_title', config.right_title || defaultConfig.right_title],
          ['submit_button_text', config.submit_button_text || defaultConfig.submit_button_text]
        ])
      });
    }

    renderApp();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9b5a930e625825c0',t:'MTc2NzAyNDY5OC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>